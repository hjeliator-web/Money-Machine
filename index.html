<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Money Machine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src='//libtl.com/sdk.js' data-zone='10388714' data-sdk='show_10388714'></script>



    
<style>
body{margin:0;background:#000;color:#fff;font-family:Arial;overflow:hidden}
header{
 position:fixed;top:0;width:100%;height:50px;
 background:#111;display:flex;align-items:center;
 justify-content:space-around;z-index:10
}
button{padding:6px 10px;font-size:13px}
canvas{display:block;margin:auto;background:#111;margin-top:50px}
.menu{
 position:fixed;top:50%;left:50%;
 transform:translate(-50%,-50%);
 background:#222;padding:15px;
 border:2px solid #555;display:none;
 max-height:80vh;overflow:auto
}
.skin{
 width:40px;height:40px;margin:4px;
 display:inline-block;border:2px solid #555
}
.locked{opacity:.3}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
</style>
</head>

<body>

<header>
 <span id="hud"></span>
 <button onclick="shoot()">ğŸ”¥</button>
 <button onclick="openShop()">ğŸ›’</button>
 <button onclick="openSettings()">âš™ï¸</button>
 <button onclick="dailyReward()">ğŸ</button>
</header>

<canvas id="game" width="360" height="600"></canvas>

<!-- SHOP -->
<div id="shop" class="menu">
 <h3>ğŸ›’ Shop</h3>
 <button onclick="watchAd('speed')">âš¡ Speed (1 Ad)</button>
 <hr>
 <h3>ğŸ¨ Skins (2 Ads)</h3>
 <div id="skins"></div>
 <p id="adStatus"></p>
 <button onclick="claimReward()">âœ… Claim Reward</button><br><br>
 <button onclick="closeShop()">Close</button>
</div>

<!-- SETTINGS -->
<div id="settings" class="menu">
 <h3>âš™ï¸ Settings</h3>
 Sensitivity
 <input type="range" min="1" max="10" value="5" oninput="sensitivity=this.value">
 <br><br>
 <button onclick="closeSettings()">Close</button>
</div>

<!-- GAME OVER -->
<div id="gameover" class="menu">
 <h2>GAME OVER</h2>
 <div id="leaderboard"></div><br>
 <button onclick="restart()">Restart</button>
</div>

<script>
Telegram.WebApp.expand();

/* ---------- DATA ---------- */
const colors=[
"cyan","red","lime","yellow","orange","pink","purple","gold",
"#00f","#0ff","#f0f","#ff0","#f80","#8f0","#0f8","#80f",
"#ccc","#f44","#4f4","#44f","#fa0","#0af","#af0","#f0a",
"#999","#f66","#6f6","#66f","#fb0","#0bf","#bf0","#f0b",
"#aaa","#f88","#8f8","#88f","#fd0","#0df","#df0","#f0d",
"#bbb","#faa","#afa","#aaf","#fe0","#0ef"
];

let save=JSON.parse(localStorage.getItem("mmSave"))||{
 coins:0,level:1,speed:6,skin:0,unlocked:[0]
};

let coins=save.coins,level=save.level,speed=save.speed;
let skin=save.skin,unlocked=save.unlocked;
let sensitivity=5;
let bullets=[],enemies=[];
let player={x:160,y:520,w:30,h:30};
let boss=false,game=true;
let pendingReward=null,skinAds=0;

const c=document.getElementById("game");
const ctx=c.getContext("2d");

/* ---------- SAVE ---------- */
function saveData(){
 localStorage.setItem("mmSave",JSON.stringify({
  coins,level,speed,skin,unlocked
 }));
}

/* ---------- HUD ---------- */
function hud(){
 document.getElementById("hud").innerText=
 `ğŸ’°${coins} | Lv ${level}`;
 saveData();
}
hud();

/* ---------- GAME ---------- */
function shoot(){bullets.push({x:player.x+12,y:player.y})}

document.onkeydown=e=>{
 if(e.key=="ArrowLeft")player.x-=speed*(sensitivity/5);
 if(e.key=="ArrowRight")player.x+=speed*(sensitivity/5);
 if(e.key==" ")shoot();
};

function spawnEnemy(){
 enemies.push({
  x:Math.random()*330,y:-30,
  s:Math.random()>.85?40:25,
  hp:Math.random()>.85?6:2,
  sp:2+level*.2,b:false
 });
}

function spawnBoss(){
 enemies.push({x:80,y:-120,s:100,hp:120,sp:1,b:true});
}

function loop(){
 if(!game)return;
 ctx.clearRect(0,0,360,600);

 ctx.fillStyle=colors[skin];
 ctx.fillRect(player.x,player.y,30,30);

 bullets.forEach((b,i)=>{
  b.y-=12;
  ctx.fillStyle="yellow";
  ctx.fillRect(b.x,b.y,5,10);
  if(b.y<0)bullets.splice(i,1);
 });

 enemies.forEach((e,i)=>{
  e.y+=e.sp;
  ctx.fillStyle=e.b?"purple":"orange";
  ctx.fillRect(e.x,e.y,e.s,e.s);

  bullets.forEach((b,bi)=>{
   if(b.x<e.x+e.s&&b.x+5>e.x&&b.y<e.y+e.s){
    e.hp--; bullets.splice(bi,1);
    if(e.hp<=0){
     coins+=e.b?200:5;
     enemies.splice(i,1);
     if(e.b){boss=false;level++;}
    }
   }
  });

  if(
   player.x<e.x+e.s&&player.x+30>e.x&&
   player.y<e.y+e.s&&player.y+30>e.y
  ) endGame();
 });

 if(!boss && Math.random()<0.03)spawnEnemy();
 if(level==10&&!boss){boss=true;spawnBoss();}
 if(coins>level*70&&!boss)level++;

 hud();
 requestAnimationFrame(loop);
}
loop();

/* ---------- GAME OVER ---------- */
function endGame(){
 game=false;
 let lb=JSON.parse(localStorage.getItem("mmLB"))||[];
 lb.push(coins);
 lb.sort((a,b)=>b-a);
 lb=lb.slice(0,5);
 localStorage.setItem("mmLB",JSON.stringify(lb));
 leaderboard.innerHTML="ğŸ†<br>"+lb.join("<br>");
 gameover.style.display="block";
}
function restart(){location.reload();}

/* ---------- MENUS ---------- */
function openShop(){shop.style.display="block";renderSkins();}
function closeShop(){shop.style.display="none";}
function openSettings(){settings.style.display="block";}
function closeSettings(){settings.style.display="none";}
function dailyReward(){coins+=20;hud();}

/* ---------- MONETAG ADS ---------- */
function watchAd(type,index=null){
 pendingReward={type,index};
 window.open("https://YOUR_MONETAG_LINK_HERE","_blank");
 alert("Watch ad then return and press CLAIM");
}

function claimReward(){
 if(!pendingReward){alert("No reward");return;}

 if(pendingReward.type=="speed")speed+=2;

 if(pendingReward.type=="skin"){
  skinAds++;
  if(skinAds>=2){
   unlocked.push(pendingReward.index);
   skin=pendingReward.index;
   skinAds=0;
  }
 }

 pendingReward=null;
 renderSkins();
 hud();
 alert("Reward granted!");
}

/* ---------- SKINS ---------- */
function renderSkins(){
 skins.innerHTML="";
 colors.forEach((c,i)=>{
  let d=document.createElement("div");
  d.className="skin"+(unlocked.includes(i)?"":" locked");
  d.style.background=c;
  d.style.animation="pulse 1s infinite";
  d.onclick=()=>{
   if(unlocked.includes(i))skin=i;
   else watchAd("skin",i);
  };
  skins.appendChild(d);
 });
}
</script>


<script>
const MONETAG_LINK = "

// Rewarded Popup

show_10388714('pop').then(() => {
    // user watch ad till the end or close it in interstitial format
    // your code to reward user for rewarded format
}).catch(e => {
    // user get error during playing ad
    // do nothing or whatever you want
})

        ";

/* store pending reward */
function watchAd(rewardType, skinId = null) {
  localStorage.setItem(
    "pendingReward",
    JSON.stringify({ rewardType, skinId })
  );

  // open monetag ONLY after user click
  window.open(MONETAG_LINK, "_blank");

  alert("ğŸ“º Watch the ad, then come back and press CLAIM");
}

/* claim reward safely */
function claimReward() {
  const data = JSON.parse(localStorage.getItem("pendingReward"));
  if (!data) {
    alert("âŒ No reward pending");
    return;
  }

  if (data.rewardType === "speed") {
    playerSpeed += 2;
  }

  if (data.rewardType === "skin") {
    skinAdCount++;
    if (skinAdCount >= 2) {
      unlockedSkins.push(data.skinId);
      currentSkin = data.skinId;
      skinAdCount = 0;
    }
  }

  if (data.rewardType === "daily") {
    coins += 200;
  }

  localStorage.removeItem("pendingReward");
  updateUI();
  alert("âœ… Reward unlocked!");
}
</script>











    
</body>
</html>
