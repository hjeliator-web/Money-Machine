<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Money Machine</title>
<style>
body{margin:0;background:#000;color:#fff;font-family:Arial;overflow:hidden}
#ui{position:fixed;top:5px;left:5px;z-index:10}
button{padding:6px;margin:2px;font-size:13px}
canvas{background:#111;display:block;margin:auto}
.menu{
 position:fixed;top:50%;left:50%;
 transform:translate(-50%,-50%);
 background:#222;padding:15px;
 border:2px solid #555;display:none
}
</style>
</head>

<body>

<div id="ui">
 <div id="hud"></div>
 <button onclick="shoot()">ğŸ”¥ Shoot</button>
 <button onclick="openShop()">ğŸ›’ Shop</button>
 <button onclick="openSettings()">âš™ï¸</button>
 <button onclick="dailyReward()">ğŸ</button><br>
 <button onclick="move(-1)">â¬…</button>
 <button onclick="move(1)">â¡</button>
</div>

<canvas id="game" width="360" height="600"></canvas>

<div id="shop" class="menu">
 <h3>ğŸ›’ Shop</h3>
 <button onclick="watchAd('speed')">âš¡ Speed (1 Ad)</button><br>
 <button onclick="watchAd('life')">â¤ï¸ Extra Life (2 Ads)</button>
 <p id="adStatus"></p>
 <button onclick="closeShop()">Close</button>
</div>

<div id="settings" class="menu">
 <h3>âš™ï¸ Settings</h3>
 Sensitivity<br>
 <input type="range" min="1" max="10" value="5"
 oninput="sensitivity=this.value"><br><br>
 <button onclick="closeSettings()">Close</button>
</div>

<div id="gameover" class="menu">
 <h2>ğŸ’€ GAME OVER</h2>
 <button onclick="restart()">ğŸ”„ Restart</button>
</div>

<script>
const c=document.getElementById("game");
const ctx=c.getContext("2d");

let player={x:160,y:520,w:30,h:30};
let bullets=[],enemies=[];
let coins=0,lives=3,level=1;
let speed=6,sensitivity=5;
let game=true,boss=false;
let ads={speed:0,life:0};

function hud(){
 document.getElementById("hud").innerText=
 `ğŸ’°${coins} â¤ï¸${lives} ğŸ”¥ Level ${level}`;
}
hud();

function shoot(){
 bullets.push({x:player.x+12,y:player.y});
}

function move(dir){
 player.x+=dir*speed*(sensitivity/5);
 player.x=Math.max(0,Math.min(330,player.x));
}

document.onkeydown=e=>{
 if(e.key=="ArrowLeft"||e.key=="a")move(-1);
 if(e.key=="ArrowRight"||e.key=="d")move(1);
 if(e.key==" ")shoot();
};

function spawnEnemy(){
 let type=Math.random();
 enemies.push({
  x:Math.random()*330,
  y:-30,
  size:type>0.85?40:25,
  hp:type>0.85?8:2,
  speed:type>0.85?1.5:2+level*0.1,
  boss:false
 });
}

function spawnBoss(){
 enemies.push({
  x:100,y:-80,size:80,hp:60,speed:1,boss:true
 });
}

function update(){
 if(!game)return;
 ctx.clearRect(0,0,360,600);

 // Player
 ctx.fillStyle="cyan";
 ctx.fillRect(player.x,player.y,player.w,player.h);

 // Bullets
 bullets.forEach((b,i)=>{
  b.y-=12;
  ctx.fillStyle="yellow";
  ctx.fillRect(b.x,b.y,5,10);
  if(b.y<0)bullets.splice(i,1);
 });

 // Enemies
 enemies.forEach((e,ei)=>{
  e.y+=e.speed;
  ctx.fillStyle=e.boss?"purple":(e.hp>3?"red":"orange");
  ctx.fillRect(e.x,e.y,e.size,e.size);

  bullets.forEach((b,bi)=>{
   if(b.x<e.x+e.size&&b.x+5>e.x&&b.y<e.y+e.size&&b.y+10>e.y){
    e.hp--; bullets.splice(bi,1);
    if(e.hp<=0){
     coins+=e.boss?100:5;
     enemies.splice(ei,1);
     if(e.boss){boss=false;level++;}
    }
   }
  });

  if(e.y>600){
   enemies.splice(ei,1);
   lives--;
   if(lives<=0)endGame();
  }
 });

 if(!boss && Math.random()<0.02+level*0.002)spawnEnemy();
 if(level==10 && !boss){
  boss=true;
  spawnBoss();
 }

 if(coins>level*50 && !boss)level++;

 hud();
 requestAnimationFrame(update);
}
update();

function endGame(){
 game=false;
 document.getElementById("gameover").style.display="block";
}

function restart(){location.reload();}

function openShop(){shop.style.display="block";}
function closeShop(){shop.style.display="none";}

function openSettings(){settings.style.display="block";}
function closeSettings(){settings.style.display="none";}

function dailyReward(){
 coins+=20;
 alert("ğŸ Daily Reward +20 Coins");
 hud();
}

function watchAd(type){
 let need=type=="speed"?1:2;
 let s=document.getElementById("adStatus");
 s.innerText="Watching ad...";
 setTimeout(()=>{
  ads[type]++;
  if(ads[type]>=need){
   ads[type]=0;
   if(type=="speed")speed+=2;
   if(type=="life")lives++;
   s.innerText="âœ… Reward unlocked";
   hud();
  }else{
   s.innerText=`Watch ${need-ads[type]} more ad(s)`;
  }
 },5000);
}
</script>

</body>
</html>
