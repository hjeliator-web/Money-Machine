<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Money Machine</title>



<!-- Add script to your app -->

<html>
    <head>
        ...
        <script src='//libtl.com/sdk.js' data-zone='10388714' data-sdk='show_10388714'></script>
    </head>
    ...
</html>





 
<style>
body{margin:0;background:#000;color:#fff;font-family:Arial;overflow:hidden}
#ui{position:fixed;top:5px;left:5px;z-index:10}
button{padding:6px;margin:2px;font-size:13px}
canvas{background:#111;display:block;margin:auto}
.menu{
 position:fixed;top:50%;left:50%;
 transform:translate(-50%,-50%);
 background:#222;padding:15px;
 border:2px solid #555;display:none;
 max-height:80vh;overflow:auto
}
.skin{
 display:inline-block;width:40px;height:40px;
 margin:5px;border:2px solid #555;
 cursor:pointer
}
.locked{opacity:.3}
@keyframes pulse{
 0%{transform:scale(1)}
 50%{transform:scale(1.1)}
 100%{transform:scale(1)}
}
</style>
</head>

<body>











    
<div id="ui">
 <div id="hud"></div>
 <button onclick="shoot()">ğŸ”¥</button>
 <button onclick="openShop()">ğŸ›’</button>
 <button onclick="openSettings()">âš™ï¸</button>
 <button onclick="dailyReward()">ğŸ</button><br>
 <button onclick="move(-1)">â¬…</button>
 <button onclick="move(1)">â¡</button>
</div>

<canvas id="game" width="360" height="600"></canvas>

<div id="shop" class="menu">
 <h3>ğŸ›’ Shop</h3>
 <button onclick="watchAd('speed')">âš¡ Speed (1 Ad)</button>
 <hr>
 <h3>ğŸ¨ Player Skins (2 Ads)</h3>
 <div id="skins"></div>
 <p id="adStatus"></p>
 <button onclick="closeShop()">Close</button>
</div>

<div id="settings" class="menu">
 <h3>âš™ï¸ Settings</h3>
 Sensitivity
 <input type="range" min="1" max="10" value="5"
 oninput="sensitivity=this.value"><br><br>
 <button onclick="closeSettings()">Close</button>
</div>

<div id="gameover" class="menu">
 <h2>ğŸ’€ GAME OVER</h2>
 <div id="leaderboard"></div><br>
 <button onclick="restart()">ğŸ”„ Restart</button>
</div>

<script>
const c=document.getElementById("game");
const ctx=c.getContext("2d");

const colors=[
"cyan","red","lime","yellow","orange","pink","purple","gold",
"#00f","#0ff","#f0f","#ff0","#f80","#8f0","#0f8","#80f",
"#ccc","#f44","#4f4","#44f","#fa0","#0af","#af0","#f0a",
"#999","#f66","#6f6","#66f","#fb0","#0bf","#bf0","#f0b",
"#aaa","#f88","#8f8","#88f","#fd0","#0df","#df0","#f0d",
"#bbb","#faa","#afa","#aaf","#fe0","#0ef"
];

let saveData=JSON.parse(localStorage.getItem("mmSave"))||{
 coins:0,level:1,speed:6,skin:0,unlocked:[0]
};

let player={x:160,y:520,w:30,h:30};
let bullets=[],enemies=[];
let coins=saveData.coins,level=saveData.level;
let speed=saveData.speed,sensitivity=5;
let skin=saveData.skin;
let unlocked=saveData.unlocked;
let game=true,boss=false;
let adCount={speed:0,skin:0};

function save(){
 localStorage.setItem("mmSave",JSON.stringify({
  coins,level,speed,skin,unlocked
 }));
}

function hud(){
 hudEl.innerText=`ğŸ’°${coins} ğŸ”¥ Lv ${level}`;
 save();
}

const hudEl=document.getElementById("hud");
hud();

function shoot(){bullets.push({x:player.x+12,y:player.y})}
function move(d){
 player.x+=d*speed*(sensitivity/5);
 player.x=Math.max(0,Math.min(330,player.x));
}

document.onkeydown=e=>{
 if(e.key=="ArrowLeft"||e.key=="a")move(-1);
 if(e.key=="ArrowRight"||e.key=="d")move(1);
 if(e.key==" ")shoot();
};

function spawnEnemy(){
 enemies.push({
  x:Math.random()*330,y:-30,
  s:Math.random()>.85?40:25,
  hp:Math.random()>.85?6:2,
  sp:2+level*.2,b:false
 });
}

function spawnBoss(){
 enemies.push({x:80,y:-120,s:100,hp:120,sp:1,b:true});
}

function update(){
 if(!game)return;
 ctx.clearRect(0,0,360,600);

 ctx.fillStyle=colors[skin];
 ctx.fillRect(player.x,player.y,30,30);
 ctx.strokeStyle="#fff";
 ctx.strokeRect(player.x,player.y,30,30);

 bullets.forEach((b,i)=>{
  b.y-=12;
  ctx.fillStyle="yellow";
  ctx.fillRect(b.x,b.y,5,10);
  if(b.y<0)bullets.splice(i,1);
 });

 enemies.forEach((e,i)=>{
  e.y+=e.sp;
  ctx.fillStyle=e.b?"purple":"orange";
  ctx.fillRect(e.x,e.y,e.s,e.s);

  bullets.forEach((b,bi)=>{
   if(b.x<e.x+e.s&&b.x+5>e.x&&b.y<e.y+e.s){
    e.hp--; bullets.splice(bi,1);
    if(e.hp<=0){
     coins+=e.b?200:5;
     enemies.splice(i,1);
     if(e.b){boss=false;level++;}
    }
   }
  });

  if(
   player.x<e.x+e.s&&player.x+30>e.x&&
   player.y<e.y+e.s&&player.y+30>e.y
  ) endGame();
 });

 if(!boss && Math.random()<0.025)spawnEnemy();
 if(level==10 && !boss){boss=true;spawnBoss();}
 if(coins>level*70&&!boss)level++;

 hud();
 requestAnimationFrame(update);
}
update();

function endGame(){
 game=false;
 saveScore();
 gameover.style.display="block";
}

function restart(){location.reload();}

function saveScore(){
 let lb=JSON.parse(localStorage.getItem("mmLB"))||[];
 lb.push(coins);
 lb.sort((a,b)=>b-a);
 lb=lb.slice(0,5);
 localStorage.setItem("mmLB",JSON.stringify(lb));
 leaderboard.innerHTML="ğŸ†<br>"+lb.join("<br>");
}

function openShop(){shop.style.display="block";renderSkins();}
function closeShop(){shop.style.display="none";}
function openSettings(){settings.style.display="block";}
function closeSettings(){settings.style.display="none";}
function dailyReward(){coins+=20;hud();}
 
// Rewarded Popup

show_10388714('pop').then(() => {
    // user watch ad till the end or close it in interstitial format
    // your code to reward user for rewarded format
}).catch(e => {
    // user get error during playing ad
    // do nothing or whatever you want
})




// In-App Interstitial

show_10388714({
  type: 'inApp',
  inAppSettings: {
    frequency: 2,
    capping: 0.1,
    interval: 30,
    timeout: 5,
    everyPage: false
  }
})

/*
This value is decoded as follows:
- show automatically 2 ads
  within 0.1 hours (6 minutes)
  with a 30-second interval between them
  and a 5-second delay before the first one is shown.
  The last digit, 0, means that the session will be saved when you navigate between pages.
  If you set the last digit as 1, then at any transition between pages,
  the session will be reset, and the ads will start again.
*/











    

function watchAd(type,index){
 adStatus.innerText="Watching ad...";
 setTimeout(()=>{
  if(type=="speed"){speed+=2}
  if(type=="skin"){
   adCount.skin++;
   if(adCount.skin>=2){
    unlocked.push(index);
    skin=index;
    adCount.skin=0;
   }
      
// Rewarded interstitial

show_10388714().then(() => {
    // You need to add your user reward function here, which will be executed after the user watches the ad.
    // For more details, please refer to the detailed instructions.
    alert('You have seen an ad!');
})

        
  }
  adStatus.innerText="âœ… Done";
  renderSkins();
  hud();
 },5000);
}

function renderSkins(){
 skins.innerHTML="";
 colors.forEach((c,i)=>{
  let d=document.createElement("div");
  d.className="skin"+(unlocked.includes(i)?"":" locked");
  d.style.background=c;
  d.style.animation="pulse 1s infinite";
  d.onclick=()=>{
   if(unlocked.includes(i)){skin=i}
   else watchAd("skin",i);
  };
  skins.appendChild(d);
 });
}
</script>

</body>
</html>
